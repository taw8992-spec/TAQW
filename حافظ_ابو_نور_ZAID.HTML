<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Start - 30 Days Timer</title>
  <style>
    :root{font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif}
    html,body{height:100%;margin:0}
    body{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;background:#1fbf4a;}
    header{width:100%;padding:12px 16px;background:rgba(0,0,0,0.08);box-shadow:0 2px 6px rgba(0,0,0,0.06);text-align:center;font-weight:700}
    .phone{font-size:18px}
    main{max-width:900px;width:100%;padding:24px;box-sizing:border-box;display:grid;grid-template-columns:1fr 320px;gap:20px}
    .card{background:rgba(255,255,255,0.12);padding:18px;border-radius:12px;backdrop-filter:blur(6px);box-shadow:0 6px 18px rgba(0,0,0,0.12);color:#fff}
    .title{font-size:20px;margin-bottom:8px}
    .timer{font-size:28px;font-weight:700;margin:14px 0}
    #startBtn{appearance:none;border:0;padding:12px 20px;border-radius:10px;font-size:18px;cursor:pointer;background:#004a1f;color:#fff}
    #startBtn[disabled]{opacity:0.5;cursor:not-allowed}
    .small{font-size:13px;opacity:0.9}
    .qrWrap{text-align:center}
    input[type=text]{width:100%;padding:10px;border-radius:8px;border:0;margin-bottom:8px}
    .note{font-size:13px;opacity:0.95}
    footer{width:100%;text-align:center;padding:8px 0;color:rgba(255,255,255,0.9);position:fixed;bottom:6px}
    @media (max-width:820px){main{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <header>
    <div class="phone">07806230404</div>
  </header>

  <main>
    <div class="card">
      <div class="title">30 Days Timer</div>
      <div class="small">Click "Start" to begin the timer from now for 30 days. After it ends, click "Start" again to restart.</div>

      <div class="timer" id="countdown">Timer not started</div>

      <button id="startBtn">Start</button>
      <div style="height:12px"></div>
      <div class="note" id="status"></div>
    </div>

    <div class="card qrWrap">
      <div class="title">QR Code</div>
      <div class="small">Enter a link and click "Generate" to create a QR code — scanning it will take you directly to the link.</div>
      <div style="height:12px"></div>
      <input type="text" id="qrUrl" placeholder="https://example.com" value="https://example.com">
      <button id="genQr">Generate</button>
      <div style="height:10px"></div>
      <div id="qrBox">
        <img id="qrImg" alt="QR code" style="width:200px;height:200px;border-radius:8px;margin-top:10px;display:block;margin-inline:auto">
      </div>
      <div style="height:10px"></div>
      <div class="note">Scan the QR code with your phone to open the link.</div>
    </div>
  </main>

  <footer>Start Page • 30 Days Timer</footer>

  <script>
    const THIRTY_DAYS = 30 * 24 * 60 * 60 * 1000;
    const KEY = 'start_end_timestamp_v1';

    const startBtn = document.getElementById('startBtn');
    const countdown = document.getElementById('countdown');
    const status = document.getElementById('status');

    let intervalId = null;

    function msToTime(ms){
      if(ms<=0) return {days:0,hours:0,mins:0,secs:0};
      const secs = Math.floor(ms/1000)%60;
      const mins = Math.floor(ms/1000/60)%60;
      const hours = Math.floor(ms/1000/3600)%24;
      const days = Math.floor(ms/1000/3600/24);
      return {days,hours,mins,secs};
    }

    function formatRemaining(ms){
      const t = msToTime(ms);
      return `${t.days} days ${String(t.hours).padStart(2,'0')}:${String(t.mins).padStart(2,'0')}:${String(t.secs).padStart(2,'0')}`;
    }

    function setEndTimestamp(ts){
      localStorage.setItem(KEY, String(ts));
    }
    function getEndTimestamp(){
      const v = localStorage.getItem(KEY);
      return v?Number(v):null;
    }
    function clearEnd(){
      localStorage.removeItem(KEY);
    }

    function updateDisplay(){
      const end = getEndTimestamp();
      if(!end){
        countdown.textContent = 'Timer not started';
        status.textContent = '';
        startBtn.disabled = false;
        return;
      }
      const now = Date.now();
      const remain = end - now;
      if(remain <= 0){
        countdown.textContent = 'Timer finished — click Start to restart';
        status.textContent = 'Time ended.';
        startBtn.disabled = false;
        clearInterval(intervalId);
        intervalId = null;
        return;
      }
      countdown.textContent = formatRemaining(remain);
      status.textContent = 'Timer is running';
      startBtn.disabled = true;
    }

    function startTimer(){
      const end = Date.now() + THIRTY_DAYS;
      setEndTimestamp(end);
      updateDisplay();
      if(intervalId) clearInterval(intervalId);
      intervalId = setInterval(updateDisplay, 1000);
    }

    (function(){
      const end = getEndTimestamp();
      if(end){
        if(end - Date.now() > 0){
          intervalId = setInterval(updateDisplay, 1000);
        }
      }
      updateDisplay();
    })();

    startBtn.addEventListener('click', ()=>{
      const end = getEndTimestamp();
      if(end && end - Date.now() > 0){
        return;
      }
      startTimer();
    });

    const genQrBtn = document.getElementById('genQr');
    const qrUrlInput = document.getElementById('qrUrl');
    const qrImg = document.getElementById('qrImg');

    function generateQr(url){
      try{
        const encoded = encodeURIComponent(url);
        const src = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encoded}`;
        qrImg.src = src;
      }catch(e){
        qrImg.alt = 'Error generating QR code';
      }
    }

    genQrBtn.addEventListener('click', ()=>{
      const url = (qrUrlInput.value||'').trim();
      if(!url){
        alert('Enter a valid link');
        return;
      }
      const normalized = /^(https?:)?\/\//i.test(url) ? url : ('https://' + url);
      qrUrlInput.value = normalized;
      generateQr(normalized);
    });

    generateQr(qrUrlInput.value);
  </script>
</body>
</html>